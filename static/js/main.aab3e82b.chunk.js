(this["webpackJsonpcompletium-dapp-escrow"]=this["webpackJsonpcompletium-dapp-escrow"]||[]).push([[0],{163:function(e,i){},165:function(e,i){},231:function(e,i){},233:function(e,i){},246:function(e,i){},248:function(e,i){},265:function(e,i,r){},267:function(e,i,r){"use strict";r.r(i);var t=r(2),n=r(0),a=r.n(n),s=r(13),c=r.n(s),o=(r(75),r(48)),l=r.n(o),m=r(62),p=r(15),d="AmazinCorp.",j="85",g="tz1ZXf37ZNfVupt5GVyrPJ76q8kbjFuD2z7R",x="tz1MZrh8CvYkp7BfLQMcm6mg5FvL5HRZfACw",b=r(318),h=r(319),u=r(269),O=r(317),P=r(313),f=r(320),I=r(64),S=r(92),y=Object(I.a)((function(e){var i=e.appName,r=a.a.useState((function(){return{wallet:null,tezos:null,accountPkh:null}})),t=Object(p.a)(r,2),n=t[0],s=n.wallet,c=n.tezos,o=n.accountPkh,d=t[1],j=Boolean(c);a.a.useEffect((function(){return S.a.onAvailabilityChange((function(e){d({wallet:e?new S.a(i):null,tezos:null,accountPkh:null})}))}),[d,i]);var g=a.a.useCallback(function(){var e=Object(m.a)(l.a.mark((function e(i,r){var t,n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,s){e.next=3;break}throw new Error("Thanos Wallet not available");case 3:return e.next=5,s.connect(i,r);case 5:return t=s.toTezos(),e.next=8,t.wallet.pkh();case 8:n=e.sent,d({wallet:s,tezos:t,accountPkh:n}),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),alert("Failed to connect ThanosWallet: ".concat(e.t0.message));case 15:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(i,r){return e.apply(this,arguments)}}(),[d,s]);return{wallet:s,tezos:c,accountPkh:o,ready:j,connect:g}}),(function(e){return e.wallet}),(function(e){return e.tezos}),(function(e){return e.accountPkh}),(function(e){return e.ready}),(function(e){return e.connect})),A=Object(p.a)(y,6),D=A[0],U=A[1],v=A[2],R=A[3],N=A[4],w=A[5];var k=r(316),C=function(e){var i=N(),r=U();return i?Object(t.jsx)("div",{}):r?Object(t.jsx)(P.a,{variant:"contained",color:"secondary",disableElevation:!0,size:"small",style:{position:"absolute",right:"90px"},onClick:e.handleConnect,children:"connect to wallet"}):Object(t.jsx)(k.a,{href:"https://templewallet.com/",rel:"noopener",underline:"none",style:{position:"absolute",right:"90px"},children:Object(t.jsx)(P.a,{variant:"contained",size:"small",disableElevation:!0,style:{backgroundColor:"#ed8936",color:"white",fontWeight:"bold"},children:"Install Temple"})})},F=r(133),T=r.n(F),E=function(e){N(),U();var i=Object(O.a)("(min-width:600px)")?"visible":"hidden",r="dark"===e.theme.palette.type;return Object(t.jsx)(b.a,{position:"static",color:r?"default":"secondary",style:{boxShadow:"none",opacity:1},children:Object(t.jsxs)(h.a,{children:[Object(t.jsx)("a",{href:"https://edukera.github.io/completium-landing/index.html",target:"_blank",style:{color:"white",height:"32px"},children:Object(t.jsx)(u.a,{variant:"h6",style:{position:"absolute",fontFamily:"Alegreya Sans SC, sans-serif"},children:"Completium"})}),Object(t.jsx)(f.a,{container:!0,justify:"center",alignItems:"center",children:Object(t.jsx)(f.a,{item:!0,children:Object(t.jsx)(u.a,{variant:"h6",style:{visibility:i,textAlign:"center",color:"white"},children:e.appTitle})})}),Object(t.jsx)(C,{handleConnect:e.handleConnect}),Object(t.jsx)("a",{href:"https://edukera.github.io/completium-landing/docs/dapp-escrow/Presentation",target:"_blank",children:Object(t.jsx)(P.a,{style:{color:"white"},component:"span",children:Object(t.jsx)(T.a,{})})})]})})},W=r(136),G=r(329),H=r(330),L=r(134),B=r(335),z=r(333);function M(e){return Object(t.jsx)(z.a,Object(L.a)({elevation:6,variant:"filled"},e))}var _=function(e){return Object(t.jsx)(B.a,{open:e.open,children:Object(t.jsx)(M,{severity:"info",style:{backgroundColor:e.theme.palette.secondary.main},children:"Waiting for operation confirmation ..."})})},Q=(r(265),function(e){return Object(t.jsx)(b.a,{position:"static",color:"default",style:{boxShadow:"none",opacity:1,heigh:300},children:Object(t.jsx)(h.a,{style:{minHeight:256},children:Object(t.jsx)(f.a,{container:!0,justify:"center",alignItems:"center",children:Object(t.jsx)(f.a,{item:!0,children:Object(t.jsxs)(u.a,{variant:"body2",color:"textSecondary",style:{flexGrow:1},children:["@copyright ",e.appName," 2021"]})})})})})}),Z=r(331),V=r(322),q=r(324),J=r(323),K=r(56),Y=r.n(K),$=r(135),X=r.n($),ee=function(e){return console.log("/completium-dapp-escrow"),Object(t.jsx)(V.a,{style:{display:"flex",marginTop:50,marginBottom:50},children:Object(t.jsxs)("div",{style:{display:"flex",flexDirection:"row"},children:[Object(t.jsx)(J.a,{style:{width:335,height:400,flex:"1 0 auto"},image:"/completium-dapp-escrow/armchair.jpg"}),Object(t.jsx)(q.a,{children:Object(t.jsxs)(f.a,{container:!0,direction:"row",justify:"flex-start",alignItems:"center",children:[Object(t.jsx)(f.a,{item:!0,xs:12,children:Object(t.jsx)(u.a,{variant:"h5",children:"Armchair for Bedroom / Living Room / Lounge"})}),Object(t.jsx)(f.a,{item:!0,xs:12,children:Object(t.jsxs)(f.a,{container:!0,direction:"row",justify:"flex-start",alignItems:"center",children:[Object(t.jsx)(f.a,{item:!0,children:Object(t.jsx)(Y.a,{color:"secondary"})}),Object(t.jsx)(f.a,{item:!0,children:Object(t.jsx)(Y.a,{color:"secondary"})}),Object(t.jsx)(f.a,{item:!0,children:Object(t.jsx)(Y.a,{color:"secondary"})}),Object(t.jsx)(f.a,{item:!0,children:Object(t.jsx)(Y.a,{color:"secondary"})}),Object(t.jsx)(f.a,{item:!0,children:Object(t.jsx)(X.a,{})}),Object(t.jsx)(f.a,{item:!0,style:{marginLeft:18},children:Object(t.jsx)(u.a,{children:"139 ratings"})})]})}),Object(t.jsx)(f.a,{item:!0,xs:1,children:Object(t.jsx)(u.a,{children:"Price:"})}),Object(t.jsx)(f.a,{item:!0,xs:11,style:{paddingLeft:12},children:Object(t.jsxs)(u.a,{variant:"h5",children:[j,"\ua729"]})}),Object(t.jsx)(f.a,{item:!0,xs:1,children:Object(t.jsx)(u.a,{children:"Color:"})}),Object(t.jsx)(f.a,{item:!0,xs:11,style:{paddingLeft:12},children:Object(t.jsx)(u.a,{children:"grey"})}),Object(t.jsx)(f.a,{item:!0,xs:12,children:Object(t.jsx)(u.a,{variant:"body1",style:{width:"100%"},children:Object(t.jsxs)("ul",{children:[Object(t.jsx)("li",{children:"Tub Chair Dimensions: 68 cm W x 62 cm D x 72 cm H."}),Object(t.jsx)("li",{children:"High quality fabric linen and supportive foam seating with soft upholstery, soft touching and durable; UK Fire Retardant foam and cover."}),Object(t.jsx)("li",{children:"Solid oak legs in natural colour finished, standing firm for daily use."}),Object(t.jsx)("li",{children:"With good packaging, simple to assemble, only 4 chair legs to attach."}),Object(t.jsx)("li",{children:"The occasional chair is suitable for living room, dining room, bedroom, office or conservatory with modern and stylish looking."})]})})})]})})]})})},ie=r(325),re=r(338),te=r(327),ne=r(334),ae=r(336),se=r(138),ce=r(326),oe=r(337);var le=Object(I.a)((function(){var e=Object(n.useState)({address:void 0,balance:0,delivery:!1}),i=Object(p.a)(e,2),r=i[0],t=i[1];return{escrowState:r,setAddress:function(e){t({address:e,balance:0,delivery:!1})},setBalance:function(e){t({address:r.address,balance:e,delivery:e>0})},closeDelivery:function(){t({address:r.address,balance:r.balance,delivery:!1})}}})),me=Object(p.a)(le,2),pe=me[0],de=me[1],je=function(e){var i=de().escrowState;return void 0===i.address?Object(t.jsx)(f.a,{container:!0,direction:"row",justify:"flex-start",alignItems:"center",style:{padding:12,paddingLeft:24,height:55},children:Object(t.jsx)(f.a,{item:!0,children:Object(t.jsx)(u.a,{color:"textSecondary",style:{fontSize:"smaller"},children:"Escrow not created (see below)."})})}):Object(t.jsxs)(f.a,{container:!0,direction:"row",justify:"flex-start",alignItems:"center",style:{padding:12,paddingLeft:24},children:[Object(t.jsx)(f.a,{item:!0,xs:2,children:Object(t.jsx)(u.a,{children:"Escrow address:"})}),Object(t.jsx)(f.a,{item:!0,xs:5,children:Object(t.jsx)("a",{style:{textDecoration:"none"},href:"https://better-call.dev/edo2net/"+i.address+"/operations",target:"_blank",children:Object(t.jsx)(oe.a,{label:i.address,color:"secondary",clickable:!0,variant:"outlined"})})}),Object(t.jsx)(f.a,{item:!0,xs:1,children:Object(t.jsx)(u.a,{children:"Balance:"})}),Object(t.jsx)(f.a,{item:!0,xs:1,children:Object(t.jsxs)(u.a,{children:[i.balance,"\ua729"]})})]})},ge=r(70),xe=r.n(ge),be=[{prim:"storage",args:[{prim:"pair",args:[{prim:"address",annots:["%seller"]},{prim:"pair",args:[{prim:"address",annots:["%buyer"]},{prim:"pair",args:[{prim:"address",annots:["%taxcollector"]},{prim:"pair",args:[{prim:"mutez",annots:["%price"]},{prim:"nat",annots:["%_state"]}]}]}]}]}]},{prim:"parameter",args:[{prim:"or",args:[{prim:"unit",annots:["%abortCreated"]},{prim:"or",args:[{prim:"unit",annots:["%abortFunded"]},{prim:"or",args:[{prim:"unit",annots:["%abort"]},{prim:"or",args:[{prim:"unit",annots:["%fund"]},{prim:"unit",annots:["%complete"]}]}]}]}]}]},{prim:"code",args:[[{prim:"NIL",args:[{prim:"operation"}]},{prim:"DIG",args:[{int:"1"}]},{prim:"UNPAIR"},{prim:"DIP",args:[{int:"1"},[{prim:"UNPAIR"},{prim:"SWAP"},{prim:"UNPAIR"},{prim:"SWAP"},{prim:"UNPAIR"},{prim:"SWAP"},{prim:"UNPAIR"},{prim:"SWAP"}]]},{prim:"IF_LEFT",args:[[{prim:"DROP",args:[{int:"1"}]},{prim:"DIG",args:[{int:"3"}]},{prim:"DUP"},{prim:"DUG",args:[{int:"4"}]},{prim:"SENDER"},{prim:"COMPARE"},{prim:"EQ"},{prim:"NOT"},{prim:"IF",args:[[{prim:"PUSH",args:[{prim:"string"},{string:"InvalidCaller"}]},{prim:"FAILWITH"}],[]]},{prim:"DUP"},{prim:"DUP"},{prim:"PUSH",args:[{prim:"nat"},{int:"0"}]},{prim:"COMPARE"},{prim:"EQ"},{prim:"IF",args:[[{prim:"PUSH",args:[{prim:"nat"},{int:"1"}]},{prim:"DIP",args:[{int:"1"},[{prim:"DIG",args:[{int:"1"}]},{prim:"DROP",args:[{int:"1"}]}]]},{prim:"DUG",args:[{int:"1"}]}],[{prim:"PUSH",args:[{prim:"string"},{string:"InvalidState"}]},{prim:"FAILWITH"}]]},{prim:"DROP",args:[{int:"1"}]},{prim:"SWAP"},{prim:"PAIR"},{prim:"SWAP"},{prim:"PAIR"},{prim:"SWAP"},{prim:"PAIR"},{prim:"SWAP"},{prim:"PAIR"},{prim:"DIG",args:[{int:"1"}]},{prim:"PAIR"}],[{prim:"IF_LEFT",args:[[{prim:"DROP",args:[{int:"1"}]},{prim:"DIG",args:[{int:"3"}]},{prim:"DUP"},{prim:"DUG",args:[{int:"4"}]},{prim:"SENDER"},{prim:"COMPARE"},{prim:"EQ"},{prim:"NOT"},{prim:"IF",args:[[{prim:"PUSH",args:[{prim:"string"},{string:"InvalidCaller"}]},{prim:"FAILWITH"}],[]]},{prim:"DUP"},{prim:"DUP"},{prim:"PUSH",args:[{prim:"nat"},{int:"2"}]},{prim:"COMPARE"},{prim:"EQ"},{prim:"IF",args:[[{prim:"PUSH",args:[{prim:"nat"},{int:"1"}]},{prim:"DIP",args:[{int:"1"},[{prim:"DIG",args:[{int:"1"}]},{prim:"DROP",args:[{int:"1"}]}]]},{prim:"DUG",args:[{int:"1"}]}],[{prim:"PUSH",args:[{prim:"string"},{string:"InvalidState"}]},{prim:"FAILWITH"}]]},{prim:"DROP",args:[{int:"1"}]},{prim:"SWAP"},{prim:"PAIR"},{prim:"SWAP"},{prim:"PAIR"},{prim:"SWAP"},{prim:"PAIR"},{prim:"SWAP"},{prim:"PAIR"},{prim:"DIG",args:[{int:"1"}]},{prim:"PAIR"}],[{prim:"IF_LEFT",args:[[{prim:"DROP",args:[{int:"1"}]},{prim:"PUSH",args:[{prim:"timestamp"},{int:"1615465045"}]},{prim:"NOW"},{prim:"COMPARE"},{prim:"GT"},{prim:"IF",args:[[{prim:"PUSH",args:[{prim:"nat"},{int:"1"}]},{prim:"SWAP"},{prim:"DROP",args:[{int:"1"}]}],[]]},{prim:"SWAP"},{prim:"PAIR"},{prim:"SWAP"},{prim:"PAIR"},{prim:"SWAP"},{prim:"PAIR"},{prim:"SWAP"},{prim:"PAIR"},{prim:"DIG",args:[{int:"1"}]},{prim:"PAIR"}],[{prim:"IF_LEFT",args:[[{prim:"DROP",args:[{int:"1"}]},{prim:"DIG",args:[{int:"3"}]},{prim:"DUP"},{prim:"DUG",args:[{int:"4"}]},{prim:"SENDER"},{prim:"COMPARE"},{prim:"EQ"},{prim:"NOT"},{prim:"IF",args:[[{prim:"PUSH",args:[{prim:"string"},{string:"InvalidCaller"}]},{prim:"FAILWITH"}],[]]},{prim:"DUP"},{prim:"DUP"},{prim:"PUSH",args:[{prim:"nat"},{int:"0"}]},{prim:"COMPARE"},{prim:"EQ"},{prim:"IF",args:[[{prim:"DIG",args:[{int:"2"}]},{prim:"DUP"},{prim:"DUG",args:[{int:"3"}]},{prim:"UNIT"},{prim:"LEFT",args:[{prim:"unit"}]},{prim:"PUSH",args:[{prim:"nat"},{int:"10"}]},{prim:"PUSH",args:[{prim:"int"},{int:"11"}]},{prim:"PAIR"},{prim:"UNIT"},{prim:"LEFT",args:[{prim:"unit"}]},{prim:"PUSH",args:[{prim:"nat"},{int:"5"}]},{prim:"PUSH",args:[{prim:"int"},{int:"1"}]},{prim:"PAIR"},{prim:"PUSH",args:[{prim:"nat"},{int:"1"}]},{prim:"PUSH",args:[{prim:"int"},{int:"1"}]},{prim:"PAIR"},{prim:"PAIR"},{prim:"PAIR"},{prim:"UNPAIR"},{prim:"UNPAIR"},{prim:"DIP",args:[{int:"1"},[{prim:"UNPAIR"},{prim:"SWAP"},{prim:"DUP"}]]},{prim:"UNPAIR"},{prim:"SWAP"},{prim:"DUP"},{prim:"DIG",args:[{int:"3"}]},{prim:"MUL"},{prim:"DUG",args:[{int:"4"}]},{prim:"DIG",args:[{int:"3"}]},{prim:"MUL"},{prim:"DIP",args:[{int:"1"},[{prim:"MUL"}]]},{prim:"DIG",args:[{int:"3"}]},{prim:"IF_LEFT",args:[[{prim:"DROP",args:[{int:"1"}]},{prim:"ADD"}],[{prim:"DROP",args:[{int:"1"}]},{prim:"SWAP"},{prim:"SUB"}]]},{prim:"PAIR"},{prim:"PAIR"},{prim:"PAIR"},{prim:"UNPAIR"},{prim:"UNPAIR"},{prim:"DIP",args:[{int:"1"},[{prim:"UNPAIR"},{prim:"SWAP"},{prim:"DUP"}]]},{prim:"UNPAIR"},{prim:"SWAP"},{prim:"DUP"},{prim:"DIG",args:[{int:"3"}]},{prim:"MUL"},{prim:"DUG",args:[{int:"4"}]},{prim:"DIG",args:[{int:"3"}]},{prim:"MUL"},{prim:"DIP",args:[{int:"1"},[{prim:"MUL"}]]},{prim:"DIG",args:[{int:"3"}]},{prim:"IF_LEFT",args:[[{prim:"DROP",args:[{int:"1"}]},{prim:"ADD"}],[{prim:"DROP",args:[{int:"1"}]},{prim:"SWAP"},{prim:"SUB"}]]},{prim:"PAIR"},{prim:"PAIR"},{prim:"UNPAIR"},{prim:"UNPAIR"},{prim:"ABS"},{prim:"DIG",args:[{int:"2"}]},{prim:"MUL"},{prim:"EDIV"},{prim:"IF_NONE",args:[[{prim:"PUSH",args:[{prim:"string"},{string:"DivByZero"}]},{prim:"FAILWITH"}],[]]},{prim:"CAR"},{prim:"AMOUNT"},{prim:"COMPARE"},{prim:"GE"},{prim:"IF",args:[[{prim:"PUSH",args:[{prim:"nat"},{int:"2"}]},{prim:"DIP",args:[{int:"1"},[{prim:"DIG",args:[{int:"1"}]},{prim:"DROP",args:[{int:"1"}]}]]},{prim:"DUG",args:[{int:"1"}]}],[]]}],[{prim:"PUSH",args:[{prim:"string"},{string:"InvalidState"}]},{prim:"FAILWITH"}]]},{prim:"DROP",args:[{int:"1"}]},{prim:"SWAP"},{prim:"PAIR"},{prim:"SWAP"},{prim:"PAIR"},{prim:"SWAP"},{prim:"PAIR"},{prim:"SWAP"},{prim:"PAIR"},{prim:"DIG",args:[{int:"1"}]},{prim:"PAIR"}],[{prim:"DROP",args:[{int:"1"}]},{prim:"DIG",args:[{int:"3"}]},{prim:"DUP"},{prim:"DUG",args:[{int:"4"}]},{prim:"SENDER"},{prim:"COMPARE"},{prim:"EQ"},{prim:"NOT"},{prim:"IF",args:[[{prim:"PUSH",args:[{prim:"string"},{string:"InvalidCaller"}]},{prim:"FAILWITH"}],[]]},{prim:"DUP"},{prim:"DUP"},{prim:"PUSH",args:[{prim:"nat"},{int:"2"}]},{prim:"COMPARE"},{prim:"EQ"},{prim:"IF",args:[[{prim:"DIG",args:[{int:"6"}]},{prim:"DUP"},{prim:"DUG",args:[{int:"7"}]},{prim:"DIG",args:[{int:"6"}]},{prim:"DUP"},{prim:"DUG",args:[{int:"7"}]},{prim:"CONTRACT",args:[{prim:"unit"}]},{prim:"IF_NONE",args:[[{prim:"PUSH",args:[{prim:"string"},{string:"BadContract"}]},{prim:"FAILWITH"}],[]]},{prim:"DIG",args:[{int:"4"}]},{prim:"DUP"},{prim:"DUG",args:[{int:"5"}]},{prim:"UNIT"},{prim:"TRANSFER_TOKENS"},{prim:"CONS"},{prim:"DIP",args:[{int:"1"},[{prim:"DIG",args:[{int:"6"}]},{prim:"DROP",args:[{int:"1"}]}]]},{prim:"DUG",args:[{int:"6"}]},{prim:"DIG",args:[{int:"6"}]},{prim:"DUP"},{prim:"DUG",args:[{int:"7"}]},{prim:"DIG",args:[{int:"4"}]},{prim:"DUP"},{prim:"DUG",args:[{int:"5"}]},{prim:"CONTRACT",args:[{prim:"unit"}]},{prim:"IF_NONE",args:[[{prim:"PUSH",args:[{prim:"string"},{string:"BadContract"}]},{prim:"FAILWITH"}],[]]},{prim:"DIG",args:[{int:"4"}]},{prim:"DUP"},{prim:"DUG",args:[{int:"5"}]},{prim:"PUSH",args:[{prim:"nat"},{int:"5"}]},{prim:"PUSH",args:[{prim:"int"},{int:"1"}]},{prim:"PAIR"},{prim:"PAIR"},{prim:"UNPAIR"},{prim:"UNPAIR"},{prim:"ABS"},{prim:"DIG",args:[{int:"2"}]},{prim:"MUL"},{prim:"EDIV"},{prim:"IF_NONE",args:[[{prim:"PUSH",args:[{prim:"string"},{string:"DivByZero"}]},{prim:"FAILWITH"}],[]]},{prim:"CAR"},{prim:"UNIT"},{prim:"TRANSFER_TOKENS"},{prim:"CONS"},{prim:"DIP",args:[{int:"1"},[{prim:"DIG",args:[{int:"6"}]},{prim:"DROP",args:[{int:"1"}]}]]},{prim:"DUG",args:[{int:"6"}]},{prim:"DIG",args:[{int:"6"}]},{prim:"DUP"},{prim:"DUG",args:[{int:"7"}]},{prim:"DIG",args:[{int:"5"}]},{prim:"DUP"},{prim:"DUG",args:[{int:"6"}]},{prim:"CONTRACT",args:[{prim:"unit"}]},{prim:"IF_NONE",args:[[{prim:"PUSH",args:[{prim:"string"},{string:"BadContract"}]},{prim:"FAILWITH"}],[]]},{prim:"DIG",args:[{int:"4"}]},{prim:"DUP"},{prim:"DUG",args:[{int:"5"}]},{prim:"PUSH",args:[{prim:"nat"},{int:"10"}]},{prim:"PUSH",args:[{prim:"int"},{int:"11"}]},{prim:"PAIR"},{prim:"PAIR"},{prim:"UNPAIR"},{prim:"UNPAIR"},{prim:"ABS"},{prim:"DIG",args:[{int:"2"}]},{prim:"MUL"},{prim:"EDIV"},{prim:"IF_NONE",args:[[{prim:"PUSH",args:[{prim:"string"},{string:"DivByZero"}]},{prim:"FAILWITH"}],[]]},{prim:"CAR"},{prim:"UNIT"},{prim:"TRANSFER_TOKENS"},{prim:"CONS"},{prim:"DIP",args:[{int:"1"},[{prim:"DIG",args:[{int:"6"}]},{prim:"DROP",args:[{int:"1"}]}]]},{prim:"DUG",args:[{int:"6"}]},{prim:"PUSH",args:[{prim:"nat"},{int:"4"}]},{prim:"DIP",args:[{int:"1"},[{prim:"DIG",args:[{int:"1"}]},{prim:"DROP",args:[{int:"1"}]}]]},{prim:"DUG",args:[{int:"1"}]}],[{prim:"PUSH",args:[{prim:"string"},{string:"InvalidState"}]},{prim:"FAILWITH"}]]},{prim:"DROP",args:[{int:"1"}]},{prim:"SWAP"},{prim:"PAIR"},{prim:"SWAP"},{prim:"PAIR"},{prim:"SWAP"},{prim:"PAIR"},{prim:"SWAP"},{prim:"PAIR"},{prim:"DIG",args:[{int:"1"}]},{prim:"PAIR"}]]}]]}]]}]]}]]}],he=function(e,i,r,t){return{prim:"Pair",args:[{string:e},{prim:"Pair",args:[{string:i},{prim:"Pair",args:[{string:r},{prim:"Pair",args:[{int:t.toString()},{int:"0"}]}]}]}]}},ue=r(26),Oe=Object(ie.a)((function(e){return{root:{width:"100%",marginBottom:50},button:{marginTop:e.spacing(1),marginRight:e.spacing(1)},actionsContainer:{marginBottom:e.spacing(2)},resetContainer:{padding:e.spacing(3)}}}));var Pe=function(e){var i=v(),r=de().setAddress,n=R();return Object(t.jsxs)(f.a,{container:!0,direction:"row",justify:"flex-start",alignItems:"center",spacing:2,children:[Object(t.jsx)(f.a,{item:!0,xs:12,children:Object(t.jsx)(u.a,{children:"Check escrow data below and click 'Create Escrow' button below:"})}),Object(t.jsx)(f.a,{item:!0,xs:3,children:Object(t.jsx)(u.a,{style:{fontWeight:"bold"},children:"Buyer (yourself)"})}),Object(t.jsx)(f.a,{item:!0,xs:9,children:null===n?Object(t.jsx)(u.a,{color:"textSecondary",children:"(Connect to wallet)"}):Object(t.jsx)(u.a,{style:{fontFamily:"Courier Prime, monospace"},children:n})}),Object(t.jsx)(f.a,{item:!0,xs:3,children:Object(t.jsx)(u.a,{style:{fontWeight:"bold"},children:"Seller"})}),Object(t.jsx)(f.a,{item:!0,xs:9,children:Object(t.jsx)(u.a,{style:{fontFamily:"Courier Prime, monospace"},children:g})}),Object(t.jsx)(f.a,{item:!0,xs:3,children:Object(t.jsx)(u.a,{style:{fontWeight:"bold"},children:"Tax collector"})}),Object(t.jsx)(f.a,{item:!0,xs:9,children:Object(t.jsx)(u.a,{style:{fontFamily:"Courier Prime, monospace"},children:x})}),Object(t.jsx)(f.a,{item:!0,xs:3,children:Object(t.jsx)(u.a,{style:{fontWeight:"bold"},children:"Tax"})}),Object(t.jsx)(f.a,{item:!0,xs:9,children:Object(t.jsxs)(u.a,{children:["20% (",17..toString(),"\ua729)"]})}),Object(t.jsx)(f.a,{item:!0,xs:3,children:Object(t.jsx)(u.a,{style:{fontWeight:"bold"},children:"Security deposit"})}),Object(t.jsx)(f.a,{item:!0,xs:9,children:Object(t.jsxs)(u.a,{children:["110% (",(1.1*j).toFixed(2).toString(),"\ua729)"]})}),Object(t.jsx)(f.a,{item:!0,xs:3,children:Object(t.jsx)(u.a,{style:{fontWeight:"bold"},children:"Deadline"})}),Object(t.jsx)(f.a,{item:!0,xs:9,children:Object(t.jsx)(u.a,{children:(new Date).toLocaleDateString()})}),Object(t.jsx)(f.a,{item:!0,children:Object(t.jsx)(P.a,{color:"secondary",variant:"contained",disableElevation:!0,onClick:function(){i.wallet.originate({code:be,init:he(g,n,x,(1e6*parseInt(j)).toString())}).send().then((function(i){return console.log("Waiting for confirmation of origination..."),e.openSnack(),i.contract()})).then((function(i){e.closeSnack(),r(i.address),e.handleNext(),console.log("Origination completed for ".concat(i.address,"."))})).catch((function(e){return console.log("Error: ".concat(JSON.stringify(e,null,2)))}))},disabled:null===n,children:"create escrow"})})]})},fe=function(e){var i=de(),r=i.escrowState,n=i.setBalance,a=v();console.log("address: ".concat(r.address));return Object(t.jsxs)(f.a,{container:!0,direction:"row",justify:"flex-start",alignItems:"center",spacing:2,children:[Object(t.jsx)(f.a,{item:!0,xs:12,children:Object(t.jsx)(u.a,{children:"You may now transfer the price amount to the seller and get back your security deposit."})}),Object(t.jsx)(f.a,{item:!0,xs:12,children:Object(t.jsx)(z.a,{severity:"warning",children:"We strongly advise you wait for the delivery to be completed."})}),Object(t.jsx)(f.a,{item:!0,xs:1,style:{textAlign:"right"},children:Object(t.jsx)(xe.a,{fontSize:"small"})}),Object(t.jsx)(f.a,{item:!0,xs:11,children:Object(t.jsxs)(u.a,{children:["transfer price value (",j,"\ua729) to seller"]})}),Object(t.jsx)(f.a,{item:!0,xs:1,style:{textAlign:"right"},children:Object(t.jsx)(xe.a,{fontSize:"small"})}),Object(t.jsx)(f.a,{item:!0,xs:11,children:Object(t.jsxs)(u.a,{children:["transfer back security deposit (",(1.1*j).toFixed(2).toString(),"\ua729) to yourself"]})}),Object(t.jsx)(f.a,{item:!0,xs:1,style:{textAlign:"right"},children:Object(t.jsx)(xe.a,{fontSize:"small"})}),Object(t.jsx)(f.a,{item:!0,xs:11,children:Object(t.jsxs)(u.a,{children:["transfer tax (",17..toString(),"\ua729) to tax collector"]})}),Object(t.jsx)(f.a,{item:!0,xs:12,children:Object(t.jsx)(P.a,{color:"secondary",variant:"contained",disableElevation:!0,style:{marginTop:20},onClick:function(){a.wallet.at(r.address).then((function(i){i.methods.complete(ue.c).send().then((function(i){e.openSnack(),i.receipt().then((function(){e.closeSnack(),n(0),e.handleNext()}))}))}))},children:"Transfer amounts"})})]})},Ie=function(e){var i=1.1*j,r=17,n=85+1*i+1*r;console.log("total : ".concat(n));var a=de(),s=a.escrowState,c=a.setBalance,o=v();return Object(t.jsxs)(f.a,{container:!0,direction:"row",justify:"flex-start",alignItems:"center",spacing:2,children:[Object(t.jsx)(f.a,{item:!0,xs:12,children:Object(t.jsx)(u.a,{children:"Check funding amounts below and click 'Fund Escrow' button below:"})}),Object(t.jsx)(f.a,{item:!0,xs:3,children:Object(t.jsx)(u.a,{style:{fontWeight:"bold"},children:"Price"})}),Object(t.jsx)(f.a,{item:!0,xs:9,children:Object(t.jsxs)(u.a,{children:[j,"\ua729"]})}),Object(t.jsx)(f.a,{item:!0,xs:3,children:Object(t.jsx)(u.a,{style:{fontWeight:"bold"},children:"Security deposit"})}),Object(t.jsx)(f.a,{item:!0,xs:9,children:Object(t.jsxs)(u.a,{children:[i.toFixed(2).toString(),"\ua729 (110%*",j,"\ua729)"]})}),Object(t.jsx)(f.a,{item:!0,xs:3,children:Object(t.jsx)(u.a,{style:{fontWeight:"bold"},children:"Tax"})}),Object(t.jsx)(f.a,{item:!0,xs:9,children:Object(t.jsxs)(u.a,{children:[r.toString(),"\ua729 (20%*",j,"\ua729)"]})}),Object(t.jsx)(f.a,{item:!0,xs:6,children:Object(t.jsx)(ce.a,{})}),Object(t.jsx)(f.a,{item:!0,xs:6}),Object(t.jsx)(f.a,{item:!0,xs:3,children:Object(t.jsx)(u.a,{style:{fontWeight:"bold"},children:"Total"})}),Object(t.jsx)(f.a,{item:!0,xs:9,children:Object(t.jsxs)(u.a,{variant:"h5",children:[n.toString(),"\ua729"]})}),Object(t.jsx)(f.a,{item:!0,children:Object(t.jsx)(P.a,{color:"secondary",variant:"contained",disableElevation:!0,onClick:function(){o.wallet.at(s.address).then((function(i){i.methods.fund(ue.c).send({amount:n.toString()}).then((function(i){e.openSnack(),i.receipt().then((function(){e.closeSnack(),c(n.toString()),e.handleNext()}))}))}))},children:"Fund escrow"})})]})};function Se(e){switch(e.index){case 0:return Object(t.jsx)(Pe,{handleNext:e.handleNext,openSnack:e.openSnack,closeSnack:e.closeSnack});case 1:return Object(t.jsx)(Ie,{handleNext:e.handleNext,openSnack:e.openSnack,closeSnack:e.closeSnack});case 2:return Object(t.jsx)(fe,{handleNext:e.handleNext,openSnack:e.openSnack,closeSnack:e.closeSnack});default:return Object(t.jsx)("div",{})}}function ye(e){var i=Oe(),r=a.a.useState(0),n=Object(p.a)(r,2),s=n[0],c=n[1],o=de().setAddress,l=["Create payment escrow","Fund escrow","Transfer"],m=function(){c((function(e){return e+1}))},d=function(){c((function(e){return e-1}))};return Object(t.jsxs)(V.a,{className:i.root,children:[Object(t.jsx)(je,{}),Object(t.jsx)(ce.a,{}),Object(t.jsx)(re.a,{activeStep:s,orientation:"vertical",color:"secondary",children:l.map((function(r,n){return Object(t.jsxs)(te.a,{children:[Object(t.jsx)(ne.a,{children:r}),Object(t.jsx)(ae.a,{children:Object(t.jsx)(Se,{index:n,activeStep:s,steps:l,handleBack:d,handleNext:m,classes:i,openSnack:e.openSnack,closeSnack:e.closeSnack})})]},r)}))}),s===l.length&&Object(t.jsxs)(se.a,{square:!0,elevation:0,className:i.resetContainer,children:[Object(t.jsx)(u.a,{children:"All steps completed - you're finished"}),Object(t.jsx)(P.a,{onClick:function(){o(void 0),c(0)},className:i.button,children:"Reset"})]})]})}var Ae=r(332),De=r(328);var Ue=function(e){return Object(t.jsxs)(f.a,{container:!0,direction:"row",justify:"flex-start",alignItems:"center",spacing:2,children:[Object(t.jsx)(f.a,{item:!0,xs:12,children:Object(t.jsx)(u.a,{children:"Fill your address below and click 'Set Address' button."})}),Object(t.jsx)(f.a,{item:!0,xs:12,children:Object(t.jsx)(Ae.a,{id:"address-street",label:"Street",variant:"outlined",color:"secondary",size:"small",fullWidth:!0})}),Object(t.jsx)(f.a,{item:!0,xs:6,children:Object(t.jsx)(Ae.a,{id:"address-city",label:"City",variant:"outlined",color:"secondary",size:"small"})}),Object(t.jsx)(f.a,{item:!0,xs:3,children:Object(t.jsx)(Ae.a,{id:"address-state",label:"State",variant:"outlined",color:"secondary",size:"small"})}),Object(t.jsx)(f.a,{item:!0,xs:3,children:Object(t.jsx)(Ae.a,{id:"address-zip",label:"Zip",variant:"outlined",color:"secondary",size:"small"})}),Object(t.jsx)(f.a,{item:!0,xs:6,children:Object(t.jsx)(Ae.a,{id:"address-county",label:"County",variant:"outlined",color:"secondary",size:"small"})}),Object(t.jsx)(f.a,{item:!0,xs:6,children:Object(t.jsx)(Ae.a,{id:"address-country",label:"Country",variant:"outlined",color:"secondary",size:"small",fullWidth:!0})}),Object(t.jsx)(f.a,{item:!0,xs:12,children:Object(t.jsx)(P.a,{color:"secondary",variant:"contained",disableElevation:!0,onClick:function(){e.setAddressFilled(!0)},children:"set address"})})]})};function ve(e){switch(e.index){case 0:return Object(t.jsx)(Ue,{handleNext:e.handleNext,setAddressFilled:e.setAddressFilled});default:return Object(t.jsx)("div",{})}}var Re=Object(ie.a)((function(e){return{root:{width:"100%"},button:{marginTop:e.spacing(1),marginRight:e.spacing(1)},actionsContainer:{marginBottom:e.spacing(2)},resetContainer:{padding:e.spacing(3)}}})),Ne=function(e){var i=de(),r=i.escrowState,s=i.closeDelivery,c=Re(),o=a.a.useState(0),l=Object(p.a)(o,2),m=l[0],d=l[1],j=a.a.useState(!1),g=Object(p.a)(j,2),x=g[0],b=g[1],h=["Fill shipping address","Parcel is ready","Parcel is in transit","Parcel delivered!"],O=function(){d((function(e){return e+1}))},f=function(){d((function(e){return e-1}))};return Object(n.useEffect)((function(){if(x)switch(m){case 0:d((function(e){return e+1}));break;case 1:setTimeout((function(){d((function(e){return e+1}))}),5e3);break;case 2:setTimeout((function(){d((function(e){return e+1}))}),8e3);break;case 3:d((function(e){return e+1}))}}),[x,m]),Object(t.jsx)(De.a,{direction:"up",in:r.delivery,mountOnEnter:!0,unmountOnExit:!0,children:Object(t.jsxs)(se.a,{elevation:3,style:{position:"fixed",bottom:20,right:20,width:"490px",backgroundImage:"url(/completium-dapp-escrow/envelop.svg)",backgroundRepeat:"no-repeat",backgroundPosition:"right 5% top -30px"},children:[Object(t.jsx)(u.a,{variant:"h6",style:{marginTop:12,marginLeft:24},children:"Express Delivery Service"}),Object(t.jsxs)(u.a,{style:{fontSize:"smaller",marginLeft:24,marginBottom:12},color:"textSecondary",children:["Tracking number: ",m>0?" #CC0499546230":" -"]}),Object(t.jsx)(ce.a,{}),Object(t.jsx)(re.a,{activeStep:m,orientation:"vertical",color:"secondary",children:h.map((function(e,i){return Object(t.jsxs)(te.a,{children:[Object(t.jsx)(ne.a,{children:e}),Object(t.jsx)(ae.a,{children:Object(t.jsx)(ve,{index:i,activeStep:m,steps:h,handleBack:f,handleNext:O,setAddressFilled:b,classes:c})})]},e)}))}),m===h.length&&Object(t.jsxs)(se.a,{square:!0,elevation:0,className:c.resetContainer,style:{paddingTop:0},children:[Object(t.jsx)(u.a,{children:"Thank you for your confidence in EDS."}),Object(t.jsx)(P.a,{onClick:function(){d(0),b(!1),s()},className:c.button,children:"Close"})]})]})})};function we(e){var i=a.a.useState(!1),r=Object(p.a)(i,2),n=r[0],s=r[1],c=w(),o=a.a.useMemo((function(){return Object(W.a)({overrides:{MuiStepIcon:{root:{"&$completed":{color:"#ca7c1b"},"&$active":{color:"#ed9222"}},active:{},completed:{}}},palette:{type:"light",secondary:{light:"#f5c58a",main:"#ed9222",dark:"#ca7c1b",contrastText:"#fff"}}})}),[false]),j=a.a.useCallback(Object(m.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,c("edo2net");case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),alert(e.t0.message);case 8:case 9:case"end":return e.stop()}}),e,null,[[0,5]])}))),[c]);return Object(t.jsxs)(G.a,{theme:o,children:[Object(t.jsx)(H.a,{}),Object(t.jsx)(E,{appTitle:"Peer to peer payment!",handleConnect:j,theme:o}),Object(t.jsx)(Z.a,{maxWidth:"md",children:Object(t.jsxs)(f.a,{container:!0,direction:"column",justify:"center",alignItems:"center",children:[Object(t.jsx)(f.a,{item:!0,children:Object(t.jsx)(ee,{})}),Object(t.jsx)(f.a,{item:!0,style:{width:"100%"},children:Object(t.jsx)(ye,{openSnack:function(){s(!0)},closeSnack:function(){s(!1)}})})]})}),Object(t.jsx)(Q,{appName:d}),Object(t.jsx)(_,{open:n,theme:o}),Object(t.jsx)(Ne,{open:!0})]})}var ke=function(){return Object(t.jsx)(D,{appName:d,children:Object(t.jsx)(pe,{children:Object(t.jsx)(a.a.Suspense,{fallback:null,children:Object(t.jsx)(we,{})})})})},Ce=function(e){e&&e instanceof Function&&r.e(3).then(r.bind(null,339)).then((function(i){var r=i.getCLS,t=i.getFID,n=i.getFCP,a=i.getLCP,s=i.getTTFB;r(e),t(e),n(e),a(e),s(e)}))};c.a.render(Object(t.jsx)(a.a.StrictMode,{children:Object(t.jsx)(ke,{})}),document.getElementById("root")),Ce()},75:function(e,i,r){}},[[267,1,2]]]);
//# sourceMappingURL=main.aab3e82b.chunk.js.map